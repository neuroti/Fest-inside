<!DOCTYPE html>
<html lang="ko" xmlns:th="http://www.thymeleaf.org">
<th:block th:replace="~{/layout/basic::setContent(~{this::content},~{this::title})}">
    <th:block th:fragment="content">

        <head>
            <title th:fragment="title">약관동의1</title>
            <link rel="stylesheet" th:href="@{/css/layoutStyle/fs1.css}">
            <script src="https://kit.fontawesome.com/2ae8fd07db.js" crossorigin="anonymous"></script>
        </head>

        <body>

        <div class="fs1-container">
            <form id="termForm" th:action="@{/festival/step1}" method="post">

                <input type="hidden" name="${_csrf.parameterName}" value="${_csrf.token}"/>

                <div class="h1">이용약관</div>

                <div class="fs1-border">
                        <textarea th:readonly rows="6" placeholder="본 이용약관은 귀하가 당사의 서비스를 사용하는 데 필요한 규정을 정의한다. 본 약관에 명시되지 않은 서비스 이용에 관한 사항은 회사가 정해 ‘공지사항’에 게시하거나 또는 별도로 공지하는 내용에 따른다. 회사는 회원이 서비스 이용 중 필요하다고 인정되는 다양한 정보에 대하여 전자메일이나 서신우편 등의 방법으로 회원에게 정보를 제공할 수 있다. 이용자는 회사에서 권한 있는 사원이 서명한 명시적인 서면에 구체적으로 허용한 경우를 제외하고는 서비스를 이용하여 불법상품을 판매하는 영업활동을 할 수 없으며 특히 해킹, 돈벌기 광고, 음란 사이트를 통한 상업행위, 상용 S/W 불법제공 등을 할 수 없다. 이를 어기고 발생한 영업활동의 결과 및 손실, 관계기관에 의한 구속 등 법적 조치 등에 관해서는 회사가 책임을 지지 않는다."
                        class="form-control my-2 bg-light border border-primary"></textarea>

                    <div class="label">
                        <input type="checkbox" name="agreement" value="terms">
                        <span>위 이용약관에 동의합니다.</span>
                    </div>

                    <textarea th:readonly rows="6" placeholder="회사가 회원 가입과 관련해 취득한 개인 신용 정보는 신용정보의 이용 및 보호에 관한 법률 제23조의 규정에 따라 타인에게 제공 및 활용 시 이용자의 동의를 얻어야 한다. 이용자의 동의는 회사가 회원으로 가입한 이용자의 신용정보를 신용정보기관, 신용정보업자 및 기타 이용자 등에게 제공해 이용자의 신용을 판단하기 위한 자료로서 활용하거나 공공기관에서 정책자료로 활용하는데 동의하는 것으로 간주한다." class="form-control my-2 bg-light border border-primary"></textarea>
                    <div class="label">
                        <input type="checkbox" name=agreement value="privacy">
                        <span>위의 개인정보 수집 및 이용에 대한 안내에 동의합니다</span>
                    </div>
                </div>
                <div class="fs1-border">
                    <div class="label">
                        <input type="checkbox" class="checkAll">
                        <span>위의 이용약관 및 개인정보 수집 및 이용에 대한 안내에 전체동의</span>
                    </div>

                    <button th:type="submit" class="button-style-step1" th:href="@{/festival/step2}">next step</button>
                </div>
            </form>
        </div> <!-- col-10 end -->

        <script th:inline="javascript">
            $(function(){
                let termForm = $('#termForm');
                let agreementCheck = $('[name="agreement"]');

                // 모두 동의
                $('.checkAll').change(function(){
                    if($(this).is(':checked')){
                        $('[name="agreement"]').prop('checked', true);
                    } else {
                        $('[name="agreement"]').prop('checked', false);
                    }
                });

                // 다음단계로 이동
                $('#next').click(function(){
                    let checkFlag = [];
                    $(agreementCheck).each(function(index, element){
                        checkFlag.push($(element).is(':checked'));
                    });

                    if(!checkFlag[0]){
                        alert('이용약관에 동의해주세요');
                        return;
                    }

                    if(!checkFlag[1]){
                        alert('개인정보 수집 및 이용에 대한 안내에 동의해주세요');
                        return;
                    }

                    termForm.submit();
                });
            });

            $('.cancelBtn').click(function() {
                $.get(/*[[@{/festival/home}]]*/, function (response){
                    window.location.href = /*[[@{/festival/home}]]*/;
                });
            });
        </script>
        </body>
    </th:block>
</th:block>
